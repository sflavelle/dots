input {
    keyboard {
        xkb {
            layout ""
            model ""
            rules ""
            variant ""
        }
        repeat-delay 600
        repeat-rate 25
        track-layout "global"
    }
    touchpad {
        tap
        natural-scroll
    }
    mouse { scroll-factor 1.0000; }
    touch { map-to-output "HDMI-A-1"; }
    focus-follows-mouse max-scroll-amount="20%"
    disable-power-key-handling
}
output "DP-1" {
    scale 1.000000
    transform "normal"
    position x=0 y=320
    mode "1920x1080"
}
output "DP-2" {
    scale 1.000000
    focus-at-startup
    transform "normal"
    position x=1920 y=0
    mode "3440x1440"

    layout {
        default-column-width { proportion 0.25; }
        preset-column-widths {
            proportion 0.25
            proportion 0.33334
            proportion 0.5
            proportion 0.66667
            proportion 0.75
        }
    }
}
output "HDMI-A-1" {
    scale 1.00
    transform "normal"
    position x=2780 y=1440
    mode "1920x720"
}
output "HDMI-A-2" {
    scale 1.000000
    transform "normal"
    position x=5360 y=320
    mode "1920x1080"
}
screenshot-path "~/Pictures/Screenshots/Screenshot from %Y-%m-%d %H-%M-%S.png"
prefer-no-csd
overview { workspace-shadow { off; }; }
layout {
    gaps 0
    struts {
        left 0
        right 0
        top 0
        bottom 0
    }
    focus-ring { off; }
    border {
        width 2
        urgent-color "rgb(255 0 0)"
    }
    background-color "transparent"
    shadow {
        on
        offset x=0.000000 y=5.000000
        softness 30
        spread 5
        draw-behind-window true
        color "#00000070"
    }
    tab-indicator {
        hide-when-single-tab
        place-within-column
        gap 5
        width 4
        length total-proportion=1.000000
        position "right"
        gaps-between-tabs 2
        corner-radius 0.000000
        active-color "red"
        inactive-color "gray"
    }
    default-column-width { proportion 0.333333; }
    preset-column-widths {
        proportion 0.333333
        proportion 0.500000
        proportion 0.666667
    }
    center-focused-column "never"
}
cursor {
    xcursor-theme "Posy_Cursor"
    xcursor-size 24
    hide-when-typing
    hide-after-inactive-ms 3000
}
environment {
    "ELECTRON_DISABLE_GPU" "1"
    "ELECTRON_OZONE_PLATFORM_HINT" "wayland"
    "MOZ_ENABLE_WAYLAND" "1"
    "MOZ_WEBRENDER" "1"
    "NIXOS_OZONE_WL" "1"
    "QT_QPA_PLATFORM" "wayland"
}
binds {
    Alt+Print { screenshot-window; }
    Ctrl+Alt+Delete hotkey-overlay-title="Power Menu" { spawn "wlogout"; }
    Ctrl+Print { screenshot-screen; }
    Mod+0 { focus-workspace 10; }
    Mod+1 { focus-workspace 1; }
    Mod+2 { focus-workspace 2; }
    Mod+3 { focus-workspace 3; }
    Mod+4 { focus-workspace 4; }
    Mod+5 { focus-workspace 5; }
    Mod+6 { focus-workspace 6; }
    Mod+7 { focus-workspace 7; }
    Mod+8 { focus-workspace 8; }
    Mod+9 { focus-workspace 9; }
    Mod+Alt+F { toggle-windowed-fullscreen; }
    Mod+Alt+Tab { toggle-column-tabbed-display; }
    Mod+B hotkey-overlay-title="Browser" { spawn "zen-browser"; }
    Mod+BracketLeft { consume-or-expel-window-left; }
    Mod+BracketRight { consume-or-expel-window-right; }
    Mod+C { center-column; }
    Mod+Ctrl+Alt+Down { move-workspace-to-monitor-down; }
    Mod+Ctrl+Alt+Left { move-workspace-to-monitor-left; }
    Mod+Ctrl+Alt+Right { move-workspace-to-monitor-right; }
    Mod+Ctrl+Alt+Up { move-workspace-to-monitor-up; }
    Mod+Ctrl+Down { focus-monitor-down; }
    Mod+Ctrl+Left { focus-monitor-left; }
    Mod+Ctrl+Period { set-dynamic-cast-monitor; }
    Mod+Ctrl+R { reset-window-height; }
    Mod+Ctrl+Right { focus-monitor-right; }
    Mod+Ctrl+Up { focus-monitor-up; }
    Mod+Down { focus-window-down; }
    Mod+E hotkey-overlay-title="File Manager (Yazi)" { spawn "alacritty" "-e" "yazi"; }
    Mod+Equal { set-column-width "+10%"; }
    Mod+Escape hotkey-overlay-title="System Monitor" { spawn "alacritty" "-e" "btop"; }
    Mod+F { maximize-column; }
    Mod+F1 { show-hotkey-overlay; }
    Mod+F4 { quit; }
    Mod+Grave hotkey-overlay-title="PulseAudio Volume Control" { spawn "pavucontrol"; }
    Mod+Left { focus-column-left; }
    Mod+Minus { set-column-width "-10%"; }
    Mod+Period { clear-dynamic-cast-target; }
    Mod+Q { close-window; }
    Mod+R { switch-preset-column-width; }
    Mod+Right { focus-column-right; }
    Mod+Shift+0 { move-column-to-workspace 10; }
    Mod+Shift+1 { move-column-to-workspace 1; }
    Mod+Shift+2 { move-column-to-workspace 2; }
    Mod+Shift+3 { move-column-to-workspace 3; }
    Mod+Shift+4 { move-column-to-workspace 4; }
    Mod+Shift+5 { move-column-to-workspace 5; }
    Mod+Shift+6 { move-column-to-workspace 6; }
    Mod+Shift+7 { move-column-to-workspace 7; }
    Mod+Shift+8 { move-column-to-workspace 8; }
    Mod+Shift+9 { move-column-to-workspace 9; }
    Mod+Shift+Ctrl+Down { move-window-to-monitor-down; }
    Mod+Shift+Ctrl+Left { move-column-to-monitor-left; }
    Mod+Shift+Ctrl+Right { move-column-to-monitor-right; }
    Mod+Shift+Ctrl+Up { move-window-to-monitor-up; }
    Mod+Shift+Down { move-window-down; }
    Mod+Shift+E hotkey-overlay-title="" { spawn "nautilus"; }
    Mod+Shift+Equal { set-window-height "+10%"; }
    Mod+Shift+F { fullscreen-window; }
    Mod+Shift+Left { move-column-left; }
    Mod+Shift+Minus { set-window-height "-10%"; }
    Mod+Shift+Period { set-dynamic-cast-window; }
    Mod+Shift+Return { power-off-monitors; }
    Mod+Shift+Right { move-column-right; }
    Mod+Shift+Tab { toggle-window-floating; }
    Mod+Shift+Up { move-window-up; }
    Mod+Slash { toggle-overview; }
    Mod+Space hotkey-overlay-title="Run Command" { spawn "fuzzel" "-T" "alacritty -e" ; }
    Mod+T hotkey-overlay-title="Open Terminal" { spawn "alacritty"; }
    Mod+Tab { switch-focus-between-floating-and-tiling; }
    Mod+Up { focus-window-up; }
    Print { screenshot; }
    XF86AudioLowerVolume hotkey-overlay-title="Volume Down" { spawn "wpctl" "set-volume" "@DEFAULT_AUDIO_SINK@" "0.05-"; }
    XF86AudioMicMute { spawn "wpctl" "set-mute" "@DEFAULT_AUDIO_SOURCE@" "toggle"; }
    XF86AudioMute hotkey-overlay-title="Mute Audio" { spawn "wpctl" "set-mute" "@DEFAULT_AUDIO_SINK@" "toggle"; }
    XF86AudioRaiseVolume hotkey-overlay-title="Volume Up" { spawn "wpctl" "set-volume" "@DEFAULT_AUDIO_SINK@" "0.05+"; }
    XF86KbdBrightnessDown { spawn "brightnessctl" "-d" "null" "s" "10%-"; }
    XF86KbdBrightnessUp { spawn "brightnessctl" "-d" "null" "s" "+10%"; }
    XF86MonBrightnessDown hotkey-overlay-title="Brightness Down" { spawn "brightnessctl" "-d" "null" "s" "10%-"; }
    XF86MonBrightnessUp hotkey-overlay-title="Brightness Up" { spawn "brightnessctl" "-d" "null" "s" "+10%"; }
}
switch-events { lid-close { spawn "systemctl" "suspend"; }; }
workspace "Utility" { open-on-output "HDMI-A-1"; }
workspace "Archipelago" { open-on-output "HDMI-A-1"; }
workspace "OBS" { open-on-output "HDMI-A-1"; }
workspace "Browser (alt)" { open-on-output "DP-1"; }
workspace "Video" { open-on-output "DP-1"; }
workspace "Browser" { open-on-output "DP-2"; }
workspace "Work" { open-on-output "DP-2"; }
workspace "Games" { open-on-output "DP-2"; }
workspace "Code" { open-on-output "DP-2"; }
workspace "Audio" { open-on-output "DP-2"; }
workspace "Communication" { open-on-output "HDMI-A-2"; }

spawn-at-startup "steam"
spawn-at-startup "vesktop"
spawn-at-startup "wl-paste" "--watch" "cliphist" "store"
spawn-at-startup "waybar"
spawn-at-startup "mako"
spawn-at-startup "swww-daemon"
// spawn-at-startup "pipeweaver-daemon"
spawn-sh-at-startup "python3 /home/lily/.config/niri/dynamic-open-float.py"
spawn-at-startup "swayidle"
spawn-at-startup "curl" "-X" "POST" "-d" "state=active" "http://10.0.10.1:8123/api/webhook/-AK5XwN-bt0AT_msCC4KAYOMv"
spawn-sh-at-startup "linux2mqtt --host 10.0.10.4 --username splatsune --password M33p... --cpu=60 --vm --du='/' --du='/mnt/games' --du='/home' --net='eno1,30' --temp"

window-rule {
    match app-id="^steam$"
    match app-id="heroic"
    match app-id="^love$" title="Olympus"
    open-on-workspace "Games"
}
window-rule {
    match app-id="^steam_app_"
    match app-id="gzdoom"
    match app-id="SpaceIdle"
    match title="Ship of Harkinian"
    match app-id="Celeste"
    match app-id="gmod"
    match app-id="SMB1R"
    match app-id="hollow_knight"
    match app-id="hitman3"
    default-column-width { fixed 1920; }
    open-on-workspace "Games"
    open-floating false
}

window-rule {
    match app-id="EverestSplash"
    open-on-workspace "Games"
}

window-rule {
    match app-id="com.bitwig.BitwigStudio"
    open-on-workspace "Audio"
}

window-rule {
    match app-id="hydrus" title="client media viewer"
    default-column-width { proportion 0.75; }
}

window-rule {
    match app-id="ArchipelagoLauncher"
    match app-id="HydraTextClient"
    open-on-workspace "Archipelago"
    open-focused true
}
window-rule {
    match app-id="com.obsproject.Studio" is-floating=false
    open-on-workspace "OBS"
    open-maximized true
}
window-rule {
    match app-id="^code$" title="Visual Studio Code"
    match app-id="jetbrains-pycharm"
    open-on-workspace "Code"
}
window-rule {
    match app-id="discord"
    match app-id="WebCord"
    match app-id="vesktop"
    match app-id="element"
    open-on-workspace "Communication"
    default-column-width { proportion 0.667; }
}
window-rule {
    match app-id="vlc"
    match app-id="mpv"
    match app-id="obs-studio"
    match app-id="jellyfin-media-player"
    open-on-workspace "Video"
    open-fullscreen true
    open-focused true
}

window-rule {
    match app-id="firefox" title="Picture-in-Picture"
    match app-id="floorp" title="Picture-in-Picture"
    match app-id="zen" title="Picture-in-Picture"
    match title="Picture in picture"
    default-column-width { proportion 0.145000; }
    default-window-height { proportion 0.200000; }
    open-on-output "DP-2"
    open-floating true
    default-floating-position relative-to="bottom-right" x=0 y=0
}
window-rule {
    match title="gsr ui"
    open-on-output "DP-2"
    open-fullscreen false
    open-floating true
    draw-border-with-background false
    border { off; }
    shadow { off; }
    default-floating-position relative-to="top-left" x=0 y=0
}
window-rule {
    match title="gsr notify"
    open-on-output "DP-2"
    open-floating true
    open-focused false
    draw-border-with-background false
    border { off; }
    shadow { off; }
    default-floating-position relative-to="top-right" x=0 y=0
}

window-rule {
    match app-id="resolve"
    exclude title="DaVinci Resolve Studio"
    open-floating true
    default-floating-position relative-to="top" x=0 y=0
}

window-rule {
    match app-id="resolve"
    open-on-workspace "Work"
}

window-rule {
    match at-startup=true
    open-focused false
}
layer-rule {
    match namespace="swww-daemon"
    place-within-backdrop true
}
xwayland-satellite { path "/usr/bin/xwayland-satellite"; }
